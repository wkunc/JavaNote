# 使用拦截器追加工作流

# 拦截器的工作原理
## 总指挥 ActionInvocation
ActionInvocation 封装了与特定动作执行相关的所有细节.

当框架收到一个请求时, 它首先决定这个 URL 映射到哪个动作.
这个动作的一个实例会被加入到一个新创建的 ActionInvocation 实例中.
接着, 框架询问声明性架构(配置文件),以发现哪些拦截器应该触发, 以及按照什么样的顺序触发.
指向这些拦截器的应用被加入到 ActionInvocation 中.
除了这些核心元素, ActionInvocation 也拥有其他重要信息(例 Servlet 请求对象和当前 动作 可用的结果组件的映射)
引用

# Struts2 内建拦截器

## 工具拦截器
### timer拦截器
这个简单的拦截器只记录执行花费的时间. 在拦截器中的什么位置决定了它实际测量什么时间

### logger拦截器
这个拦截器提供了一个简单的日志记录机制, 记录了在预处理时的进入声明以及在后加工时的退出声明

## 数据转移拦截器

### params拦截器
它将请求参数转移到通过 ValueStack 公开的属性上.

params 拦截器并不知道这些数据最终会去哪里, 它只是把数据转移到 ValueStack 上发现的第一个匹配的属性.

动作总是在请求处理周期开始时被放到 ValueStack 上

### static-params拦截器
这个拦截器也将参数转移到 ValueStack 公开的属性上, 不同的是参数的来源.
这个拦截器转移的参数来自于 声明性架构 (配置文件) 中, 如:
```xml
<action name="exampleAction" class="example.exampleAction">
    <param name="firstName">John</param>
    <param name="lastName">Doe</param>
</action>
```
需要注意的是, defaultStack 中 static-params拦截器在 params拦截器之前调用, 所以 请求参数会覆盖配置文件中的值
### autowiring拦截器(不是 default-stack 里的拦截器)
这个拦截器为使用 Spring 提供了一个集成点

### servlet-config拦截器

### fileUpload拦截器

## 工作流拦截器

### workflow拦截器

### validation拦截器

### prepare拦截器
### modelDriven拦截器

## 其他拦截器
### exception拦截器

### token拦截器和token-session拦截器

### scoped-modeDriven拦截器

### execAndWait拦截器

