# 安全管理器与访问权限
## 权限检测
安全管理器是一个负责控制具体操作是否允许执行类
安全管理器负责检查的操作包括以下内容:
* 创建一个新的类加载器
* 退出虚拟机
* 使用反射访问另一个类的成员
* 访问本地文件
* 打开 socket 连接
* 启动打印作业
* 访问系统剪切板
* 访问 AWT 事件队列
* 打开一个顶层窗口

# Java 平台安全性

它的*安全策略*建立了*代码来源*和*访问权限集*之间的映射关系

**代码来源(code source)**是由一个*代码位置*和一个*证书集*指定的

**权限(permission)**是指由安全管理器负责检查的任何属性

---
每个类都有一个保护域, 它是一个用于封装类的代码来源和权限集合的对象.
当 SecurityManager 需要检查某个权限时, 它要查看当前位于调用堆栈上的
所有方法的类， 然后它要获得所有类的*保护域*, 并且询问每个保护域, 
其权限集合是否允许执行当前正在被检查的操作. 如果所有的域都同意, 
那么检查得以通过. 否则就会抛出一个 SecurityException 异常

```java
//这是 Class 类中的方法可以获取不同类的保护域
public java.security.ProtectionDomain getProtectionDomain(){
    //...
}
```

# 安全策略文件
策略管理要读取相应的*策略文件*, 这些文件包含了将代码来源映射为权限的指令.

默认情况下, 有两个位置可以安装策略文件
* Java平台主目录的 java.policy 文件
* 用户主目录的 .java.policy 文件
--------
在默认情况下, Java 应用程序是不安装安全管理器的. 因此, 在安装安全管理器之前,
看不到策略文件的作用. 当然,可以将下面的代码加入 main() 方法中,或用-Djava.security.manager
```
System.setSecurityManager(new SecurityManager());
```


