# 共享对象

synchronized(同步)还具有另一个重要, 微妙的方面: 内存可见性.
我们不仅仅希望能够避免一个线程修改其他线程正在使用的对象的状态,
而且希望确保当一个线程修改了对象状态后, 其他的线程能够真正看到改变.

## 可见性

当读和写发生在不同线程中时, 通常不能保证读线程及时地读取其他线程写入的值.
为了确保跨线程写入的内存可见性. 你必须使用同步机制.

锁不仅仅是关于同步于互斥的, 也是关于内存可见的.
为了保证所有线程都能看到共享的, 可变变量的最新值,
读取和写入线程必须使用公共的锁进行同步.

### Volatile 变量
一种同步的弱形式: volatile 变量.
它确保对一个变量的更新以可预见的方式告知其他线程. 当一个域声明为volatile类型后,
编译器与运行时会监视这个变量: 它是共享的, 而且对它的操作不会与其他的内存操作一起被重排序.
volatile 变量不会缓存在寄存器或者缓存在对其他处理器隐藏的地方. 
所以, 读一个volatile 修饰的变量时, 总会返回由某个线程所写入的最新值.
